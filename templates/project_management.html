<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <title>Manajemen Project</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <link href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css" rel="stylesheet">
  <link href="/static/css/project_management.css" rel="stylesheet">
  <link href="/static/css/loading.css" rel="stylesheet">
</head>
<body>
  

    <main id="pmMain" class="pm-main">
      <header class="pm-header d-flex justify-content-between align-items-start flex-wrap gap-2 p-3">
        <div>
          <h1 class="h4 mb-1">Manajemen Project</h1>
          <div class="text-muted">Kelola semua data project secara langsung</div>
        </div>

        <div class="d-flex gap-2 align-items-center header-actions">
          <button id="btnOpenAddModal" class="btn btn-primary"><i class="fa-solid fa-plus"></i> Tambah Project</button>
          <button id="btnOpenImportModal" class="btn btn-outline-secondary"><i class="fa-solid fa-file-import"></i> Import</button>
          <button id="btnGoBack" class="btn btn-outline-dark"><i class="fa-solid fa-arrow-left"></i> Kembali</button>
        </div>
      </header>

      <section class="card mx-3 mb-3">
        <div class="card-header d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-2">
          <div class="d-flex gap-2 align-items-center">
            <span class="fw-semibold">Daftar Project</span>
          </div>
          <div class="d-flex gap-2 align-items-center">
            <label for="pageLengthSelect" class="me-2 mb-0 small text-muted">Tampilkan</label>
            <select id="pageLengthSelect" class="form-select form-select-sm" style="width:110px;">
              <option value="5">5</option>
              <option value="10" selected>10</option>
              <option value="25">25</option>
              <option value="50">50</option>
              <option value="100">100</option>
              <option value="-1">All</option>
            </select>
            <input id="searchInputPM" type="text" class="form-control form-control-sm" placeholder="Cari BRD, Project, PIC..." />
            <button id="btnClearSearchPM" class="btn btn-sm btn-outline-secondary"><i class="fa-solid fa-eraser"></i></button>
            <button id="btnRefreshPM" class="btn btn-sm btn-outline-secondary"><i class="fa-solid fa-rotate"></i></button>
          </div>
        </div>

        <div class="card-body table-responsive">
          <table id="tblProjectsPM" class="table table-striped table-hover align-middle" style="width:100%">
            <thead>
              <tr>
                <th>No</th><th>BRD No</th><th>Project / Fitur</th><th>Link BRD</th>
                <th>Status</th><th>Priority</th><th>Tanggal Submit</th><th>Tanggal Completed</th>
                <th>PIC</th><th>Catatan</th><th>Aksi</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div id="fallbackPagination" class="card-footer d-flex flex-column flex-md-row justify-content-between align-items-center" style="display:none;">
          <div id="fallbackInfo" class="small text-muted">Showing 0 to 0 of 0 entries</div>
          <nav aria-label="Page navigation"><ul id="fallbackPager" class="pagination mb-0"></ul></nav>
        </div>
      </section>
    </main>
  </div>

  <div id="pmSidebarOverlay" class="pm-sidebar-overlay" style="display:none;"></div>

  <div id="loadingScreen" class="loading-screen hidden">
    <div class="loading-content">
      <div class="wave-loader"><span></span><span></span><span></span><span></span><span></span></div>
      <div class="loading-text">Memuat data projectâ€¦</div>
    </div>
  </div>

  <!-- Modal Add/Edit -->
  <div class="modal fade" id="modalProject" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <form id="formProject" class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalTitle">Tambah Project</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="fieldUid" name="uid" value="">
          <div class="row g-2">
            <div class="col-md-6"><label class="form-label">BRD No</label><input id="fieldBrd" name="BRD No" class="form-control" required></div>
            <div class="col-md-6"><label class="form-label">Project / Fitur</label><input id="fieldProject" name="Project/Fitur" class="form-control" required></div>
            <div class="col-md-6"><label class="form-label">Link BRD</label><input id="fieldLink" name="Link BRD" class="form-control"></div>
            <div class="col-md-6"><label class="form-label">PIC</label><input id="fieldPic" name="PIC" class="form-control"></div>
            <div class="col-md-4"><label class="form-label">Status</label>
              <select id="fieldStatus" name="Status" class="form-select"><option>New</option><option>In Progress</option><option>Pending</option><option>Completed</option></select>
            </div>
            <div class="col-md-4"><label class="form-label">Priority</label>
              <select id="fieldPriority" name="Priority" class="form-select"><option>Low</option><option>Medium</option><option>High</option><option>Urgent</option></select>
            </div>
            <div class="col-md-4"><label class="form-label">Tanggal Submit</label><input id="fieldSubmit" name="Tanggal Submit" type="date" class="form-control"></div>
            <div class="col-12"><label class="form-label">Catatan</label><textarea id="fieldNotes" name="Catatan" class="form-control" rows="2"></textarea></div>
            <div class="col-md-6"><label class="form-label">Tanggal Completed</label><input id="fieldCompleted" name="Tanggal Completed" type="date" class="form-control"></div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
          <button type="submit" class="btn btn-primary" id="btnSaveProject">Simpan</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal View -->
  <div class="modal fade" id="modalViewProject" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Lihat Project</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="viewUid" value="">
          <div class="row g-2">
            <div class="col-md-6"><label class="form-label">BRD No</label><input id="viewBrd" class="form-control" readonly></div>
            <div class="col-md-6"><label class="form-label">Project / Fitur</label><input id="viewProject" class="form-control" readonly></div>
            <div class="col-md-6"><label class="form-label">Link BRD</label><input id="viewLink" class="form-control" readonly></div>
            <div class="col-md-6"><label class="form-label">PIC</label><input id="viewPic" class="form-control" readonly></div>
            <div class="col-md-4"><label class="form-label">Status</label><input id="viewStatus" class="form-control" readonly></div>
            <div class="col-md-4"><label class="form-label">Priority</label><input id="viewPriority" class="form-control" readonly></div>
            <div class="col-md-4"><label class="form-label">Tanggal Submit</label><input id="viewSubmit" class="form-control" readonly></div>
            <div class="col-md-6"><label class="form-label">Tanggal Completed</label><input id="viewCompleted" class="form-control" readonly></div>
            <div class="col-12"><label class="form-label">Catatan</label><textarea id="viewNotes" class="form-control" rows="3" readonly></textarea></div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
        </div>
      </div>
    </div>
  </div>

  <input id="importFileInput" type="file" accept=".xlsx" style="display:none" />

  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script src="/static/js/loading.js"></script>
  <script src="/static/js/project_management.js"></script>
</body>
</html>
